diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4~' -x aclocal.m4t -x autom4te.cache -x config.cache -x config.log -x config.status -x config.h -x config.h.in -x ABOUT-NLS -x Makefile.in.in -x Makevars.template -x '*SlackBuild*' -x '*.egg-info' -x '*.class' -x '*.pyc' -x '*.mo' -x '*.gmo' -x '*.orig' -x '*.rej' -x '*.spec' -x '*.temp' -x '*~' -x '*.stackdump' -x COPYING -x INSTALL -x compile -x config-ml.in -x config.guess -x config.sub -x depcomp -x elisp-comp -x install-sh -x libtool.m4 -x ltoptions.m4 -x ltsugar.m4 -x ltversion.m4 -x 'lt~obsolete.m4' -x ltmain.sh -x mdate-sh -x missing -x mkinstalldirs -x py-compile -x symlink-tree -x texinfo.tex -x ylwrap -x config.rpath -x omf.make -x xmldocs.make -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x intltool-extract -x intltool-extract.in -x intltool-merge -x intltool-merge.in -x intltool-update -x intltool-update.in origsrc/cmake-2.4.8/Modules/FindwxWidgets.cmake src/cmake-2.4.8/Modules/FindwxWidgets.cmake
--- origsrc/cmake-2.4.8/Modules/FindwxWidgets.cmake	2008-01-21 12:59:51.000000000 -0600
+++ src/cmake-2.4.8/Modules/FindwxWidgets.cmake	2008-05-08 22:15:17.843750000 -0500
@@ -150,10 +150,10 @@
 IF(WIN32)
   SET(WIN32_STYLE_FIND 1)
 ENDIF(WIN32)
-IF(MINGW)
+IF(MINGW OR CYGWIN)
   SET(WIN32_STYLE_FIND 0)
   SET(UNIX_STYLE_FIND 1)
-ENDIF(MINGW)
+ENDIF(MINGW OR CYGWIN)
 IF(UNIX)
   SET(UNIX_STYLE_FIND 1)
 ENDIF(UNIX)
diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4~' -x aclocal.m4t -x autom4te.cache -x config.cache -x config.log -x config.status -x config.h -x config.h.in -x ABOUT-NLS -x Makefile.in.in -x Makevars.template -x '*SlackBuild*' -x '*.egg-info' -x '*.class' -x '*.pyc' -x '*.mo' -x '*.gmo' -x '*.orig' -x '*.rej' -x '*.spec' -x '*.temp' -x '*~' -x '*.stackdump' -x COPYING -x INSTALL -x compile -x config-ml.in -x config.guess -x config.sub -x depcomp -x elisp-comp -x install-sh -x libtool.m4 -x ltoptions.m4 -x ltsugar.m4 -x ltversion.m4 -x 'lt~obsolete.m4' -x ltmain.sh -x mdate-sh -x missing -x mkinstalldirs -x py-compile -x symlink-tree -x texinfo.tex -x ylwrap -x config.rpath -x omf.make -x xmldocs.make -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x intltool-extract -x intltool-extract.in -x intltool-merge -x intltool-merge.in -x intltool-update -x intltool-update.in origsrc/cmake-2.4.8/Modules/KDE3Macros.cmake src/cmake-2.4.8/Modules/KDE3Macros.cmake
--- origsrc/cmake-2.4.8/Modules/KDE3Macros.cmake	2008-01-21 12:59:51.000000000 -0600
+++ src/cmake-2.4.8/Modules/KDE3Macros.cmake	2008-05-08 22:15:17.859375000 -0500
@@ -304,20 +304,20 @@
    GET_FILENAME_COMPONENT(_soname ${_target_location} NAME)
    SET(_laname ${CMAKE_CURRENT_BINARY_DIR}/${_laname}.la)
 
-   FILE(WRITE ${_laname} "# ${_laname} - a libtool library file, generated by cmake \n")
+   FILE(WRITE ${_laname} "# ${_laname} - a libtool library file, generated by cmake \n\n")
    FILE(APPEND ${_laname} "# The name that we can dlopen(3).\n")
-   FILE(APPEND ${_laname} "dlname='${_soname}'\n")
+   FILE(APPEND ${_laname} "dlname='${_soname}'\n\n")
    FILE(APPEND ${_laname} "# Names of this library\n")
-   FILE(APPEND ${_laname} "library_names='${_soname} ${_soname} ${_soname}'\n")
+   FILE(APPEND ${_laname} "library_names='${_soname}'\n\n")
    FILE(APPEND ${_laname} "# The name of the static archive\n")
-   FILE(APPEND ${_laname} "old_library=''\n")
+   FILE(APPEND ${_laname} "old_library=''\n\n")
    FILE(APPEND ${_laname} "# Libraries that this one depends upon.\n")
-   FILE(APPEND ${_laname} "dependency_libs=''\n")
+   FILE(APPEND ${_laname} "dependency_libs=''\n\n")
 #   FILE(APPEND ${_laname} "dependency_libs='${${_target}_LIB_DEPENDS}'\n")
-   FILE(APPEND ${_laname} "# Version information.\ncurrent=0\nage=0\nrevision=0\n")
-   FILE(APPEND ${_laname} "# Is this an already installed library?\ninstalled=yes\n")
-   FILE(APPEND ${_laname} "# Should we warn about portability when linking against -modules?\nshouldnotlink=yes\n")
-   FILE(APPEND ${_laname} "# Files to dlopen/dlpreopen\ndlopen=''\ndlpreopen=''\n")
+   FILE(APPEND ${_laname} "# Version information.\ncurrent=0\nage=0\nrevision=0\n\n")
+   FILE(APPEND ${_laname} "# Is this an already installed library?\ninstalled=yes\n\n")
+   FILE(APPEND ${_laname} "# Should we warn about portability when linking against -modules?\nshouldnotlink=yes\n\n")
+   FILE(APPEND ${_laname} "# Files to dlopen/dlpreopen\ndlopen=''\ndlpreopen=''\n\n")
    FILE(APPEND ${_laname} "# Directory that this library needs to be installed in:\n")
    FILE(APPEND ${_laname} "libdir='${CMAKE_INSTALL_PREFIX}/lib/kde3'\n")
 
diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4~' -x aclocal.m4t -x autom4te.cache -x config.cache -x config.log -x config.status -x config.h -x config.h.in -x ABOUT-NLS -x Makefile.in.in -x Makevars.template -x '*SlackBuild*' -x '*.egg-info' -x '*.class' -x '*.pyc' -x '*.mo' -x '*.gmo' -x '*.orig' -x '*.rej' -x '*.spec' -x '*.temp' -x '*~' -x '*.stackdump' -x COPYING -x INSTALL -x compile -x config-ml.in -x config.guess -x config.sub -x depcomp -x elisp-comp -x install-sh -x libtool.m4 -x ltoptions.m4 -x ltsugar.m4 -x ltversion.m4 -x 'lt~obsolete.m4' -x ltmain.sh -x mdate-sh -x missing -x mkinstalldirs -x py-compile -x symlink-tree -x texinfo.tex -x ylwrap -x config.rpath -x omf.make -x xmldocs.make -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x intltool-extract -x intltool-extract.in -x intltool-merge -x intltool-merge.in -x intltool-update -x intltool-update.in origsrc/cmake-2.4.8/Modules/Platform/CYGWIN.cmake src/cmake-2.4.8/Modules/Platform/CYGWIN.cmake
--- origsrc/cmake-2.4.8/Modules/Platform/CYGWIN.cmake	2008-01-21 12:59:51.000000000 -0600
+++ src/cmake-2.4.8/Modules/Platform/CYGWIN.cmake	2008-05-08 22:15:17.875000000 -0500
@@ -1,9 +1,9 @@
-SET(CMAKE_SHARED_LIBRARY_CREATE_C_FLAGS "-shared -Wl,--export-all-symbols -Wl,--enable-auto-import")
+SET(CMAKE_SHARED_LIBRARY_CREATE_C_FLAGS "-shared -Wl,--export-all-symbols -Wl,--enable-auto-import -Wl,--enable-auto-image-base")
 SET(CMAKE_SHARED_MODULE_CREATE_C_FLAGS ${CMAKE_SHARED_LIBRARY_CREATE_C_FLAGS})
-SET(CMAKE_DL_LIBS "-lgdi32" )
+SET(CMAKE_DL_LIBS "" )
 SET(CMAKE_SHARED_LIBRARY_PREFIX "cyg")
 SET(CMAKE_SHARED_LIBRARY_SUFFIX ".dll")
-SET(CMAKE_SHARED_MODULE_PREFIX "lib")
+SET(CMAKE_SHARED_MODULE_PREFIX "cyg")
 SET(CMAKE_SHARED_MODULE_SUFFIX ".dll")
 SET(CMAKE_IMPORT_LIBRARY_PREFIX "lib")
 SET(CMAKE_IMPORT_LIBRARY_SUFFIX ".dll.a")
@@ -16,7 +16,7 @@
 SET(CMAKE_MODULE_EXISTS 1)
 
 SET(CMAKE_FIND_LIBRARY_PREFIXES "cyg" "lib")
-SET(CMAKE_FIND_LIBRARY_SUFFIXES ".dll" ".dll.a" ".a")
+SET(CMAKE_FIND_LIBRARY_SUFFIXES ".dll.a" ".a")
 
 SET(CMAKE_GNULD_IMAGE_VERSION
   "-Wl,--major-image-version,<TARGET_VERSION_MAJOR>,--minor-image-version,<TARGET_VERSION_MINOR>")
diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4~' -x aclocal.m4t -x autom4te.cache -x config.cache -x config.log -x config.status -x config.h -x config.h.in -x ABOUT-NLS -x Makefile.in.in -x Makevars.template -x '*SlackBuild*' -x '*.egg-info' -x '*.class' -x '*.pyc' -x '*.mo' -x '*.gmo' -x '*.orig' -x '*.rej' -x '*.spec' -x '*.temp' -x '*~' -x '*.stackdump' -x COPYING -x INSTALL -x compile -x config-ml.in -x config.guess -x config.sub -x depcomp -x elisp-comp -x install-sh -x libtool.m4 -x ltoptions.m4 -x ltsugar.m4 -x ltversion.m4 -x 'lt~obsolete.m4' -x ltmain.sh -x mdate-sh -x missing -x mkinstalldirs -x py-compile -x symlink-tree -x texinfo.tex -x ylwrap -x config.rpath -x omf.make -x xmldocs.make -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x intltool-extract -x intltool-extract.in -x intltool-merge -x intltool-merge.in -x intltool-update -x intltool-update.in origsrc/cmake-2.4.8/Source/cmInstallTargetGenerator.cxx src/cmake-2.4.8/Source/cmInstallTargetGenerator.cxx
--- origsrc/cmake-2.4.8/Source/cmInstallTargetGenerator.cxx	2008-01-21 12:59:53.000000000 -0600
+++ src/cmake-2.4.8/Source/cmInstallTargetGenerator.cxx	2008-05-08 22:20:51.109375000 -0500
@@ -76,6 +76,13 @@
   std::string props;
   const char* properties = 0;
   cmTarget::TargetType type = this->Target->GetType();
+
+  // An import library looks like a static library.
+  if(this->ImportLibrary)
+    {
+    type = cmTarget::STATIC_LIBRARY;
+    }
+
   switch(type)
     {
     case cmTarget::SHARED_LIBRARY:
@@ -86,6 +93,13 @@
       const char* lib_version = 0;
       const char* lib_soversion = 0;
 
+#if defined(WIN32) || defined(__CYGWIN__)
+      if(type == cmTarget::SHARED_LIBRARY)
+        {
+        destination += "/../bin";
+        }
+#endif
+
         // Versioning is supported only for shared libraries and modules,
         // and then only when the platform supports an soname flag.
       cmGlobalGenerator* gg =
@@ -153,12 +167,6 @@
       break;
     }
 
-  // An import library looks like a static library.
-  if(this->ImportLibrary)
-    {
-    type = cmTarget::STATIC_LIBRARY;
-    }
-
   // Write code to install the target file.
   const char* no_dir_permissions = 0;
   const char* no_rename = 0;
diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4~' -x aclocal.m4t -x autom4te.cache -x config.cache -x config.log -x config.status -x config.h -x config.h.in -x ABOUT-NLS -x Makefile.in.in -x Makevars.template -x '*SlackBuild*' -x '*.egg-info' -x '*.class' -x '*.pyc' -x '*.mo' -x '*.gmo' -x '*.orig' -x '*.rej' -x '*.spec' -x '*.temp' -x '*~' -x '*.stackdump' -x COPYING -x INSTALL -x compile -x config-ml.in -x config.guess -x config.sub -x depcomp -x elisp-comp -x install-sh -x libtool.m4 -x ltoptions.m4 -x ltsugar.m4 -x ltversion.m4 -x 'lt~obsolete.m4' -x ltmain.sh -x mdate-sh -x missing -x mkinstalldirs -x py-compile -x symlink-tree -x texinfo.tex -x ylwrap -x config.rpath -x omf.make -x xmldocs.make -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x intltool-extract -x intltool-extract.in -x intltool-merge -x intltool-merge.in -x intltool-update -x intltool-update.in origsrc/cmake-2.4.8/Source/cmTarget.cxx src/cmake-2.4.8/Source/cmTarget.cxx
--- origsrc/cmake-2.4.8/Source/cmTarget.cxx	2008-01-21 12:59:53.000000000 -0600
+++ src/cmake-2.4.8/Source/cmTarget.cxx	2008-05-08 22:15:17.890625000 -0500
@@ -1341,8 +1341,13 @@
     if(type == cmTarget::SHARED_LIBRARY && !implib &&
        this->Makefile->IsOn("CMAKE_SHARED_LIBRARY_NAME_WITH_VERSION"))
       {
+      int major = 0;
+      char major_str [10];
+      sscanf(version, "%d.%*d", &major);
+      sprintf(major_str, "%d", major);
+
       outBase += "-";
-      outBase += version;
+      outBase += major_str;
       }
     }
 
diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4~' -x aclocal.m4t -x autom4te.cache -x config.cache -x config.log -x config.status -x config.h -x config.h.in -x ABOUT-NLS -x Makefile.in.in -x Makevars.template -x '*SlackBuild*' -x '*.egg-info' -x '*.class' -x '*.pyc' -x '*.mo' -x '*.gmo' -x '*.orig' -x '*.rej' -x '*.spec' -x '*.temp' -x '*~' -x '*.stackdump' -x COPYING -x INSTALL -x compile -x config-ml.in -x config.guess -x config.sub -x depcomp -x elisp-comp -x install-sh -x libtool.m4 -x ltoptions.m4 -x ltsugar.m4 -x ltversion.m4 -x 'lt~obsolete.m4' -x ltmain.sh -x mdate-sh -x missing -x mkinstalldirs -x py-compile -x symlink-tree -x texinfo.tex -x ylwrap -x config.rpath -x omf.make -x xmldocs.make -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x intltool-extract -x intltool-extract.in -x intltool-merge -x intltool-merge.in -x intltool-update -x intltool-update.in origsrc/cmake-2.4.8/Utilities/cm_xmlrpc.h src/cmake-2.4.8/Utilities/cm_xmlrpc.h
--- origsrc/cmake-2.4.8/Utilities/cm_xmlrpc.h	2008-01-21 12:59:57.000000000 -0600
+++ src/cmake-2.4.8/Utilities/cm_xmlrpc.h	2008-05-08 22:35:23.625000000 -0500
@@ -20,8 +20,8 @@
 /* Use the xmlrpc library configured for CMake.  */
 #include "cmThirdParty.h"
 #ifdef CMAKE_USE_SYSTEM_XMLRPC
-# include <xmlrpc.h>
-# include <xmlrpc_client.h>
+# include <xmlrpc-c/base.h>
+# include <xmlrpc-c/client.h>
 #else
 # include <cmxmlrpc/xmlrpc.h>
 # include <cmxmlrpc/xmlrpc_client.h>
