--- origsrc/cmake-2.8.1/Modules/Platform/CYGWIN.cmake	2010-04-06 09:45:32.000000000 -0500
+++ src/cmake-2.8.1/Modules/Platform/CYGWIN.cmake	2010-04-29 03:18:17.764076400 -0500
@@ -1,9 +1,9 @@
-SET(WIN32 1)
+SET(WIN32 0)
 SET(CYGWIN 1)
 
 SET(CMAKE_SHARED_LIBRARY_PREFIX "cyg")
 SET(CMAKE_SHARED_LIBRARY_SUFFIX ".dll")
-SET(CMAKE_SHARED_MODULE_PREFIX "lib")
+SET(CMAKE_SHARED_MODULE_PREFIX "cyg")
 SET(CMAKE_SHARED_MODULE_SUFFIX ".dll")
 SET(CMAKE_IMPORT_LIBRARY_PREFIX "lib")
 SET(CMAKE_IMPORT_LIBRARY_SUFFIX ".dll.a")
--- origsrc/cmake-2.8.1/Modules/Platform/CYGWIN-GNU.cmake	2010-04-06 09:45:32.000000000 -0500
+++ src/cmake-2.8.1/Modules/Platform/CYGWIN-GNU.cmake	2010-04-29 03:15:14.095571100 -0500
@@ -20,6 +20,7 @@ set(__CYGWIN_COMPILER_GNU 1)
 
 # TODO: Is -Wl,--enable-auto-import now always default?
 set(CMAKE_EXE_LINKER_FLAGS_INIT "-Wl,--enable-auto-import")
+SET(CMAKE_EXE_EXPORTS_${lang}_FLAG "-Wl,--export-all-symbols")
 set(CMAKE_CREATE_WIN32_EXE  "-mwindows")
 
 set(CMAKE_GNULD_IMAGE_VERSION
--- origsrc/cmake-2.8.1/Source/cmMakefile.cxx	2010-04-06 09:45:34.000000000 -0500
+++ src/cmake-2.8.1/Source/cmMakefile.cxx	2010-04-29 03:17:22.069890800 -0500
@@ -2344,18 +2344,13 @@ void cmMakefile::AddDefaultDefinitions()
   working, these variables are still also set here in this place, but they
   will be reset in CMakeSystemSpecificInformation.cmake before the platform 
   files are executed. */
-#if defined(_WIN32) || defined(__CYGWIN__)
+#if defined(_WIN32)
   this->AddDefinition("WIN32", "1");
   this->AddDefinition("CMAKE_HOST_WIN32", "1");
 #else
   this->AddDefinition("UNIX", "1");
   this->AddDefinition("CMAKE_HOST_UNIX", "1");
 #endif
-  // Cygwin is more like unix so enable the unix commands
-#if defined(__CYGWIN__)
-  this->AddDefinition("UNIX", "1");
-  this->AddDefinition("CMAKE_HOST_UNIX", "1");
-#endif
 #if defined(__APPLE__)
   this->AddDefinition("APPLE", "1");
   this->AddDefinition("CMAKE_HOST_APPLE", "1");
--- origsrc/cmake-2.8.1/Source/kwsys/DynamicLoader.cxx	2010-04-06 09:45:36.000000000 -0500
+++ src/cmake-2.8.1/Source/kwsys/DynamicLoader.cxx	2010-04-29 03:18:23.833423500 -0500
@@ -72,7 +72,11 @@ DynamicLoader::GetSymbolAddress(DynamicL
 //----------------------------------------------------------------------------
 const char* DynamicLoader::LibPrefix()
 {
+#if defined(__CYGWIN__)
+  return "cyg";
+#else
   return "lib";
+#endif
 }
 
 //----------------------------------------------------------------------------
